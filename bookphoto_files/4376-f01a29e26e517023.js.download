!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4740adc2-f6db-42d1-ae65-229429f13f9b",e._sentryDebugIdIdentifier="sentry-dbid-4740adc2-f6db-42d1-ae65-229429f13f9b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4376,9251],{10226:function(e,t,r){"use strict";r.d(t,{x:function(){return s.x}});var s=r(79992)},7614:function(e,t,r){"use strict";r.d(t,{t:function(){return b}});var s=r(97458),a=r(18503),n=r(10893),l=r(52983),i=r(98155),o=r(770),u=r(39266),c=r(57291),f=r(58058),d=r.n(f),m=r(77300);let v=e=>{let{page1Href:t}=e,{href:r,as:a}=(0,m.H)(t),{t:l}=(0,n.$G)("common");return(0,s.jsx)(d(),{href:r,as:a,passHref:!0,legacyBehavior:!0,prefetch:!1,children:(0,s.jsxs)("a",{className:(0,c.cx)("$items-center $justify-center $gap-10 $font-semibold $hidden md:$flex $text-surface-foreground-2"),children:[(0,s.jsx)(o.J,{as:u.Z,size:"lg"}),l("goToPage1")]})})};var g=r(39597),h=r(51780);let x=e=>{let{currentPage:t=1,pages:r=0,inputPageUrlGenerator:a}=e,{t:i}=(0,n.$G)("common"),[o,u]=(0,l.useState)(1),{push:c}=(0,h.useRouter)();return(0,l.useEffect)(()=>{u(t)},[t]),(0,s.jsxs)("div",{className:"$sprinkles-text-sm $text-surface-foreground-2",children:[i("common:page"),(0,s.jsx)(g.I,{className:"$mx-5 $h-30 $max-w-60 w-fit",type:"number",min:"1",max:r,value:0===o?"":o,onChange:e=>{let t=e.target.value;if(""===t){u(0);return}/^\d+$/.test(t)&&u(Number(t))},onKeyDown:e=>{if("Enter"!==e.key||r&&o>r)return;let t=a(o),{href:s,as:n}=(0,m.H)(t);c(s,n)}}),"".concat(i("common:of")," ").concat(r)]})};var p=r(51865);let b=(0,l.memo)(e=>{let{prevHref:t="",nextHref:r="",page1Href:l,currentPage:o=1,pages:u=0,inputPageUrlGenerator:c,className:f}=e,{t:d}=(0,n.$G)("common"),m=o<u;return(0,s.jsxs)("div",{className:(0,a.m)("$flex $items-center $mt-60 $relative $min-h-40",f),children:[l&&o>=3&&(0,s.jsx)(v,{page1Href:l}),(0,s.jsxs)("div",{className:"$flex $max-h-40 $flex-1 $items-center $justify-center $gap-20",children:[o>1&&(0,s.jsx)(p.C,{prevHref:t}),m&&(0,s.jsx)(i.k,{nextHref:r})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"$sprinkles-text-sm $hidden $text-surface-foreground-2 md:$block xl:$hidden",children:d("pageOf",{from:o,to:u})}),(0,s.jsx)("div",{className:"$hidden xl:$block",children:(0,s.jsx)(x,{currentPage:o,pages:u,inputPageUrlGenerator:c})})]})]})})},13665:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var s=r(97458),a=r(57291),n=r(7616),l=r(22688),i=r(25839),o=r(10934),u=r(86555),c=r(5704);let f=()=>{let e=(0,n.Dv)(i.zg),t=(0,c.Jn)("term");return null!=e?e:t};var d=r(770),m=r(27488),v=r(10893);let g=()=>{let e=(0,n.Dv)(i.Sf),t=(0,n.Dv)(i.pu),r=f();return(0,s.jsxs)("div",{className:(0,a.cx)("flex items-center gap-2 transition-all duration-500 ease-out text-surface-foreground-1 font-lg max-w-screen-lg",e?"opacity-100 h-auto mt-5":"opacity-0 h-0"),children:[(0,s.jsx)(d.J,{as:m.Z,size:"sm",className:"shrink-0"}),(0,s.jsx)("div",{className:"min-w-0 truncate",children:(0,s.jsx)(v.cC,{i18nKey:"searchBar:assistant.aiSearchingFor",values:{prompt:t||r}})})]})};var h=r(59251),x=r(58058),p=r.n(x),b=r(32950),$=r(82935);let j="/pikaso/assistant",y={icon:"/ai/icon-generator/tool",video:"/pikaso/ai-video-generator"},w=()=>{var e;let t=(0,b.Jn)("type"),r=(0,$.L)(),s=null!==(e=y[t])&&void 0!==e?e:j,a=r(s);return e=>{let t=new URLSearchParams({prompt:e,from_element:"search_assistant"});s===j&&t.set("submit","true"),window.open("".concat(a,"?").concat(t.toString()),"_blank","noopener,noreferrer")}},S=e=>{let{as:t,children:r,className:n,...l}=e;return(0,s.jsx)(null!=t?t:"button",{...l,className:(0,a.cx)("rounded-full min-w-max bg-piki-blue-500/10 px-4 py-2 text-sm text-primary-1 hover:bg-piki-blue-500/20 dark:text-surface-foreground-accent-0 gap-2 flex items-center",n),"data-cy":"smart-search-suggestion",children:r})},E=()=>{let{t:e}=(0,v.$G)("searchBar"),t=(0,b.Jn)("term"),{suggestedPrompt:r}=(0,u.q)(),a=w();return r?(0,s.jsxs)(S,{onClick:()=>a(r),children:[(0,s.jsx)(d.J,{as:m.Z,size:"sm"}),(0,s.jsx)(v.cC,{t:e,i18nKey:"assistant.form.generateFromAssistant",values:{searchTerm:t}})]}):null},N=()=>{let{suggestedTerms:e,suggestedFilters:t}=(0,u.q)();return e&&(null==e?void 0:e.length)>0||t&&(null==t?void 0:t.length)>0?(0,s.jsx)("div",{className:"flex w-full",children:(0,s.jsx)(h.Draggable,{children:(0,s.jsxs)("div",{className:"relative flex gap-2","data-cy":"smart-search-suggestions",children:[(0,s.jsx)(E,{}),null==e?void 0:e.map(e=>{let{term:t,href:r,onClick:a}=e;return(0,s.jsx)(p(),{href:r,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(S,{as:"a",onClick:a,children:t})},t)}),null==t?void 0:t.map(e=>{let{key:t,description:r,href:a,onClick:n}=e;return(0,s.jsx)(p(),{href:a,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(S,{as:"a",onClick:n,children:r})},t)})]})})}):(0,s.jsx)(E,{})},k=()=>{let{message:e}=(0,u.q)(),t=f(),r=(0,n.Dv)(i.Sf),c=(0,o.i)();return(0,s.jsx)("div",{className:(0,a.cx)("mb-7",c&&"px-4 lg:px-10"),children:(0,s.jsxs)("div",{className:"$max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"max-w-screen-lg",children:[t&&(0,s.jsx)(l.D,{title:t}),(0,s.jsx)(g,{})]}),!r&&e&&(0,s.jsxs)("div",{className:"mt-2 flex w-full flex-col gap-4",children:[(0,s.jsx)("p",{className:"max-w-screen-lg text-sm text-surface-foreground-3","data-cy":"smart-search-message",children:e}),(0,s.jsx)(N,{})]})]})})}},86555:function(e,t,r){"use strict";r.d(t,{q:function(){return k}});var s=r(7616),a=r(52983),n=r(32950),l=r(25839),i=r(91968),o=r(31861),u=r(5704),c=r(35576),f=r(7009),d=r(58443);let m=()=>{let e=(0,d.D)();return(0,a.useCallback)(async t=>{let s="bb6a004a-8f03-4d2a-88fb-a63499d4591a";if(!s)return;let a={userId:null==e?void 0:e.id,uuid:t},{loadSpace:n}=await Promise.resolve().then(r.bind(r,65508)),l=await n(s);l.init({custom:a,useLocalStorage:!0}),l.logEvent("open_survey_search_assistant")},[e])};var v=r(8147),g=r(2209),h=r(8314),x=r(51780),p=r(10893),b=r(1850);let $=b.z.object({message:b.z.string().optional(),suggestedTerms:b.z.array(b.z.string()).optional(),suggestedPrompt:b.z.string().optional(),suggestedFilters:b.z.array(b.z.object({key:b.z.string(),value:b.z.string(),description:b.z.string()})).optional(),filters:b.z.array(b.z.object({key:b.z.string(),value:b.z.string()})).optional()}),j=async e=>{let{uuid:t,term:r,prompt:s,filters:a,walletId:n}=e,l=new URLSearchParams({uuid:t,term:r,prompt:s,walletId:null!=n?n:"",filters:JSON.stringify(a)}),i=await fetch("/api/search/smart?".concat(l.toString()));if(!i.ok)throw Error("There was a problem retrieving the search assistant");return $.parse(await i.json())};var y=r(10934);let w=["term","format","page"],S=()=>{var e,t;let{t:r}=(0,p.$G)("common"),{push:i}=(0,x.useRouter)(),o=null!==(e=(0,u.Jn)("term"))&&void 0!==e?e:"",c=null!==(t=(0,u.Jn)("type"))&&void 0!==t?t:"",f=(0,u.Jn)("img"),d=(0,y.i)(),m=(0,s.Dv)(l.IS),b=(0,a.useRef)(o),$=(0,a.useRef)(c),S=(0,s.Dv)(u.lh),E=(0,s.Dv)(l.gQ),N=(0,s.b9)(l.nU),k=(0,s.b9)(l.Sf),[_,L]=(0,s.KO)(l.zg),z=(0,s.b9)(l.pu),C=(0,s.b9)(l.Oi),D=(0,v.H)(),{openToast:R}=(0,h.x_)(),A=(0,g.y)(()=>{k(!1),N(!0)},400);return{sendRequest:async e=>{let t=e.trim();if(t)try{var s,a,l;k(!0),N(!1);let e=S.filter(e=>{let[t]=e;return!w.includes(t)}).map(e=>{let[t,r]=e;return{key:t,value:r}}),r=o||t;if(_)z(t);else{let e=null!=t?t:"";d||(e=o||t),L(e),z("")}let{message:u,filters:v,suggestedPrompt:g,suggestedTerms:h,suggestedFilters:x}=await j({uuid:E,term:r,prompt:t,filters:e,walletId:null==D?void 0:D.walletId}),p=null==h?void 0:h.shift();C({message:u,filters:v,suggestedPrompt:g,suggestedTerms:h,suggestedFilters:x});let y=null!=p?p:o,R=null!==(a=null==v?void 0:null===(s=v.find(e=>{let{key:t}=e;return"type"===t}))||void 0===s?void 0:s.value)&&void 0!==a?a:c;b.current=y,$.current=R;let A=[...null!==(l=null==v?void 0:v.map(e=>{let{key:t,value:r}=e;return[t,r]}))&&void 0!==l?l:[],[n.FILTERS_NAMES.term,b.current],[n.FILTERS_NAMES.format,"B"===m?n.FILTERS_VALUES.format.search:n.FILTERS_VALUES.format.ai]];f&&(A=[...A,[n.FILTERS_NAMES.img,f]]);let I=(0,n.oq)(A),T={pathname:"/search",query:(0,n.E$)(I)};i(T)}catch(e){console.error("Search assistant request error:",e),R({type:"danger",title:r("errorTitle"),message:r("errorMessage")})}finally{A()}},currentTerm:b,currentType:$}},E=e=>{let{activeFilters:t,name:r,value:s,aiFormat:a}=e,l=t.filter(e=>{let[t]=e;return t!==n.FILTERS_NAMES.format});l.push([n.FILTERS_NAMES.format,a?n.FILTERS_VALUES.format.ai:n.FILTERS_VALUES.format.search]);let i=(0,n.oq)(l);return{pathname:"/search",query:(0,u.ln)({name:r,value:s},i)}},N=e=>{let{position:t=0,applyFilter:r=[],applyTerm:s="",walletIdParam:a=""}=e,n=new URLSearchParams({partner:"data",event_at:Date.now().toString(),position:t.toString(),...s&&{apply_term:s},...r.length>0&&{apply_filter:r.join(",")}}),l="send&event&".concat(n.toString()).concat(a);(0,c.OA)(l)},k=()=>{var e;let t=(0,a.useRef)(0),r=null!==(e=(0,u.Jn)("term"))&&void 0!==e?e:"",{sendRequest:c,currentTerm:d,currentType:v}=S(),g=(0,s.Dv)(l.IS),[h,x]=(0,s.KO)(l.Oi),{message:p,suggestedTerms:b,suggestedFilters:$,suggestedPrompt:j}=null!=h?h:{},y=m(),[w,k]=(0,s.KO)(o.OR),_=(0,s.Dv)(u.lh),L=(0,s.Dv)(l.gQ),z=(0,i.Y)(),C=(0,f.J)();(0,a.useEffect)(()=>{let e=r!==d.current;w&&(k(!1),e&&(z(),t.current=0)),e&&(d.current=r)},[d,r,t,w,k,z]);let D=()=>{t.current+=1,2===t.current&&y(L)},R=(0,a.useCallback)(e=>{if(!b||(null==b?void 0:b.length)===0)return;let t=b.filter((t,r)=>r!==e);x({...h,suggestedTerms:null!=t?t:[]})},[x,h,b]),A=(0,a.useCallback)(e=>{if(!$||(null==$?void 0:$.length)===0)return;let t=$.filter((t,r)=>r!==e);x({...h,suggestedFilters:null!=t?t:[]})},[x,h,$]),I=(e,t,r)=>{"type"===e&&v.current!==t&&(v.current=t),A(r),D(),N({position:r,applyFilter:[e,t],walletIdParam:C})},T=(e,t)=>{d.current=e,R(t),D(),N({position:t,applyTerm:e,walletIdParam:C})};return{userInteractionCounter:t,handleSendRequestToAssistant:async e=>{await c(e),D()},message:p,suggestedTerms:null==b?void 0:b.slice(0,4).map((e,t)=>({term:e,href:E({activeFilters:_,name:n.FILTERS_NAMES.term,value:e,aiFormat:"B"!==g}),onClick:()=>T(e,t)})),suggestedFilters:null==$?void 0:$.slice(0,2).map((e,t)=>{let{key:r,value:s,description:a}=e;return{key:r+s,value:s,description:a,href:E({activeFilters:_,name:r,value:s,aiFormat:"B"!==g}),onClick:()=>I(r,s,t)}}),suggestedPrompt:j,searchTerm:r}}},70697:function(e,t,r){"use strict";r.d(t,{B:function(){return c}});var s=r(97458),a=r(7616),n=r(10226),l=r(25839),i=r(10934),o=r(5704),u=r(13665);let c=e=>{let{nextSearch:t,description:r,total:c}=e,f=(0,o.Jn)("term"),d=(0,o.Jn)("author"),m=(0,i.i)(),v=(0,a.Dv)(l.IS),g=(0,a.Dv)(l.zg),h=(null==t?void 0:t.term)||f,x=!h&&d;return m?null:"B"===v&&g?(0,s.jsx)(u.Z,{}):x?(0,s.jsx)("div",{className:"mb-5"}):(0,s.jsx)(n.x,{title:h,description:r,nextSearch:t,total:c})}},59251:function(e,t,r){"use strict";let s;r.r(t),r.d(t,{AttentionEffect:function(){return y},Draggable:function(){return o},DraggableMobile:function(){return u},DraggableNavigation:function(){return S},NavigationButton:function(){return p}});var a=r(97458),n=r(52983);r(81602);var l=(0,r(22319).c)({defaultClassName:"_15qpb3h3 _15qpb3h1 $relative $flex $cursor-grab $overflow-x-auto",variantClassNames:{fit:{false:"_15qpb3h4",true:"_15qpb3h2 $-mx-20 $overflow-y-hidden"},overflowScrolling:{true:"_15qpb3h6"}},defaultVariants:{fit:!1},compoundVariants:[]});let i=e=>{let{active:t=!1,ref:r}=e,[s,a]=(0,n.useState)(t),[l,i]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),[c,f]=(0,n.useState)(0),[d,m]=(0,n.useState)(0),[v,g]=(0,n.useState)(0),[h]=(0,n.useState)(5),x=(0,n.useCallback)(e=>{let t=r.current;t&&(i(!0),g(e.pageX-t.offsetLeft),f(t.scrollLeft))},[r]),p=(0,n.useCallback)(()=>{i(!1)},[]),b=(0,n.useCallback)(e=>{let t=r.current;if(t&&l){e.preventDefault();let r=c-(e.pageX-t.offsetLeft-v);Math.abs(t.scrollLeft-r)>h&&(u(!0),m(r),t.scrollLeft=r)}},[l,r,c,v,h]),$=(0,n.useCallback)(e=>{o&&(e.preventDefault(),e.stopPropagation()),u(!1)},[o]);return(0,n.useEffect)(()=>{if(a(t),s){let e=r.current;return e&&(e.addEventListener("mousedown",x),e.addEventListener("mouseleave",p),e.addEventListener("mouseup",p),e.addEventListener("mousemove",b),e.addEventListener("click",$)),()=>{e&&(e.removeEventListener("mousedown",x),e.removeEventListener("mouseleave",p),e.removeEventListener("mouseup",p),e.removeEventListener("mousemove",b),e.removeEventListener("click",$))}}},[t,s,x,p,b,$,r]),{isActive:s,position:d}},o=e=>{let{active:t=!0,children:r,fit:s=!1}=e,o=(0,n.useRef)(null),{isActive:u}=i({active:t,ref:o});return(0,a.jsx)("div",{ref:o,className:u?l({fit:s}):void 0,children:r})},u=e=>{let{active:t=!0,children:r,fit:s=!1}=e,o=(0,n.useRef)(null),{isActive:u}=i({active:t,ref:o});return(0,a.jsx)("div",{ref:o,className:u?l({fit:s}):"_15qpb3h0",children:r})};var c=r(78364),f=r(34224),d=r(39266),m=r(57291),v=r(40197),g=r(770),h=r(13807),x=r.n(h);let p=e=>{let{position:t,style:r,onClick:s,showCallUserAttentionEffect:l,className:i,dataCy:o,arrowAriaLabel:u,size:c="base"}=e,[f,d]=(0,n.useState)(!1),m=(0,n.useRef)(!1),g=(0,n.useCallback)(()=>{f||d(!0),null==s||s()},[f,s]);return(0,n.useEffect)(()=>{f||!1!==m.current||setTimeout(()=>{d(!0),m.current=!0},1e4)},[f]),(0,a.jsxs)("button",{onClick:g,className:(0,v.m6)(b({position:t,style:r,size:c}),i),"data-cy":o,"aria-label":u,children:[l&&!f&&(0,a.jsx)(y,{size:c}),(0,a.jsx)($,{position:t,size:c,style:r})]})},b=(0,m.j)("$absolute $inset-y-0  $flex $w-35  $cursor-pointer $items-center $justify-center",{variants:{position:{left:"$-left-15",right:"$-right-15"},style:{default:'$bg-surface-0 before:$absolute before:$inset-y-0  before:$w-35 before:$from-white before:$to-transparent before:$content-[""] dark:before:from-surface-0',resources:""},size:{base:"",xs:""}},compoundVariants:[{style:"default",position:"left",class:"before:$left-35 before:$bg-gradient-to-r"},{style:"default",position:"right",class:"before:$right-35 before:$bg-gradient-to-l"}]}),$=e=>{let{position:t,size:r="base",style:s="default"}=e;return(0,a.jsx)("span",{className:j({size:r,style:s}),children:(0,a.jsx)(g.J,{as:"left"===t?d.Z:f.Z,size:r})})},j=(0,m.j)("$z-0 $flex $items-center  $justify-center hover:$text-surface-foreground-2 text-surface-foreground-2",{variants:{size:{base:"$h-35 $w-35",xs:"$h-[24px] $w-[24px]"},style:{default:"",resources:"$rounded-full $bg-surface-0 $shadow-xs "}}}),y=e=>{let{size:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{size:t,className:x().bigAttention}),(0,a.jsx)(w,{size:t,className:x().smallAttention})]})},w=e=>{let{size:t,className:r}=e;return(0,a.jsx)("span",{className:(0,m.cx)("$absolute $cursor-default $rounded-full $bg-surface-3 $opacity-40 $backdrop-blur-md",r,"xs"===t?"$h-25 $w-25":"$h-35 $w-35")})},S=e=>{let{children:t,style:r="default",overflowScrolling:o=!0,className:u,width:f,nextNavigationButtonEffect:d,navigationClassName:m,arrowDataCy:v,arrowPrevAriaLabel:g,arrowNextAriaLabel:h,arrowSize:x}=e,b=(0,n.useRef)(null),$=(0,n.useRef)(null),[j,y]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),{position:E}=i({active:!0,ref:b}),N=(0,n.useCallback)(()=>{let e=null==b?void 0:b.current,t=null==$?void 0:$.current;if(e&&t){let r=e.offsetWidth,s=t.scrollWidth,a=e.scrollLeft>=s-r;y(e.scrollLeft>0),S(s>r&&!a)}},[]),k=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null==b?void 0:b.current;if(t){let r=t.offsetWidth*(e?1:-1);t.scroll({left:t.scrollLeft+r/2,behavior:"smooth"}),clearTimeout(s),s=setTimeout(N,500)}},[N]);return(0,n.useEffect)(()=>{N()},[E,N]),(0,n.useEffect)(()=>{let e=null==$?void 0:$.current,t=new ResizeObserver(N);return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[N]),(0,a.jsxs)("div",{className:(0,c.W)("$group $relative",u),children:[(0,a.jsx)("div",{ref:b,className:l({overflowScrolling:o}),children:(0,a.jsx)("div",{className:"full"===f?"$w-full":"",ref:$,children:t})}),j&&(0,a.jsx)(p,{position:"left",style:r,onClick:()=>k(),className:m,dataCy:"".concat(v,"-left"),arrowAriaLabel:g,size:x}),w&&(0,a.jsx)(p,{position:"right",style:r,showCallUserAttentionEffect:d,onClick:()=>k(!0),className:m,dataCy:"".concat(v,"-right"),arrowAriaLabel:h,size:x})]})}},39266:function(e,t,r){"use strict";var s=r(97458);t.Z=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"m151.856 397 163.322-163.322c9.763-9.763 9.763-25.592 0-35.355s-25.592-9.763-35.355 0l-181 181C93.941 384.203 91.5 390.602 91.5 397s2.441 12.796 7.322 17.678l181 181c9.764 9.763 25.592 9.763 35.355 0s9.763-25.592 0-35.355z"})})},81602:function(){},13807:function(e){e.exports={bigAttention:"attentionEffect_bigAttention__sx2Uw",smallAttention:"attentionEffect_smallAttention__DuzZW"}}}]);