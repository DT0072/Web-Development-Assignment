<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shopping Cart</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body class="cart-page">
    <header>
		<nav class="navbar">
		<div class="logo">
			<img src="assets/fairytale.png" alt="404 Books logo" style="vertical-align:middle; margin-right:6px; width:32px; height:32px;">
			<span style="font-weight:bold;">404 Books</span>
		</div>
		<button class="hamburger" aria-label="Open Menu">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<ul class="nav-links">
			<li><a href="Homepage.html">Homepage</a></li>
			<li><a href="AboutUs.html">About Us</a></li>
			<li class="dropdown">
				<a href="#">Category</a>
				<ul class="dropdown-menu">
					<li><a href="fiction.html">Fiction</a></li>
					<li><a href="non_fiction.html">Non-Fiction</a></li>
            		<li><a href="children.html">Children</a></li>
				</ul>
			</li>
			<li><a href="BookListingPage.html">Browse Books</a></li>
			<li><a href="cart.html">Checkout</a></li>
			<li><a href="LoginPage.html">Login / Register</a></li>
			<li><a href="contactus.html">Contact Us</a></li>
        </ul>
        </nav>
    </header>

    <h1>Shopping Cart ðŸ›’</h1>

    <div class="cart-container">
        <div class="cart-header">
            <div>Image</div>
            <div>Title</div>
            <div>Price</div>
            <div>Qty</div>
            <div>Subtotal</div>
            <div>Remove</div>
        </div>
    <div id="cart-body">
    </div>
    <div class="cart-footer">
      <div></div><div></div><div></div>
      <div>Total:</div>
      <div id="cart-total">RM0.00</div>
      <div></div>
    </div>
  </div>

  <button class="checkout-btn">Proceed to Checkout</button>

<script>
    const cartBody = document.getElementById('cart-body');
    const cartTotal = document.getElementById('cart-total');
    const checkoutBtn = document.querySelector(".checkout-btn");

    function renderCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    cartBody.innerHTML = '';
    let total = 0;

    if (cart.length === 0) {
      cartBody.innerHTML = `
        <div class="empty-cart">
          <p>Your cart is empty</p>
          <a href="BookListingPage.html" class="continue-btn">Continue Shopping</a>
        </div>
      `;
      cartTotal.textContent = 'RM0.00';
      if (checkoutBtn) checkoutBtn.style.display = "none";
      return;
    } else {
      if (checkoutBtn) checkoutBtn.style.display = "inline-block";
    }

    cart.forEach((item, index) => {
      const subtotal = item.price * item.quantity;
      total += subtotal;

      const row = document.createElement('div');
      row.className = 'cart-item';
      row.innerHTML = `
        <div><img src="${item.image}" alt="${item.title}"></div>
        <div>${item.title}</div>
        <div>RM${item.price.toFixed(2)}</div>
        <div><input type="number" min="1" value="${item.quantity}" onchange="updateQty(${index}, this.value)"></div>
        <div>RM${subtotal.toFixed(2)}</div>
        <div><button class="remove-btn" onclick="removeItem(${index})">ðŸ—‘</button></div>
      `;
      cartBody.appendChild(row);
    });

    cartTotal.textContent = `RM${total.toFixed(2)}`;
    }

    function updateQty(index, newQty) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart[index].quantity = parseInt(newQty);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
    }

    function removeItem(index) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
    }

    renderCart();
</script>
</body>
</html>

